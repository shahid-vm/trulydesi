<div class="home-tab color-{{ section.settings.color_scheme }} gradient">
  <h2 class="homepage_h2">
    {{ section.settings.title | escape }}
  </h2>
  <div class="coll-desc">
  {{ section.settings.coll-desc }}
  </div>
  <div class="collection_tabs page-width">
    <div class="collectionTabLabel">
      <ul class="collection_tab_heading">
        {% for block in section.blocks %}
          <li class="tab-title {% if forloop.index == 1 %}activeTab{% endif %}">
            <a href="#tab{{ forloop.index }}">{{ block.settings.tabLabel }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
    <div class="tab-content">
      {% for block in section.blocks %}
        <div
          id="tab{{ forloop.index }}"
          class="swiper collectionsProducts"
          {% if forloop.index == 1 %}style="display:block"{% endif %}>
          <ul class="swiper-wrapper">
            {% for product in block.settings.collection.products limit: 4 -%}
              <li
                id="Slide-{{ section.id }}-{{ forloop.index }} "
                class="swiper-slide {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
              >
                <div class="CollectionProduct">                    
                   {% render 'card-product-custom',
                    card_product: product,
                    media_aspect_ratio: section.settings.image_ratio,
                    image_shape: section.settings.image_shape,
                    show_secondary_image: section.settings.show_secondary_image,
                    show_vendor: section.settings.show_vendor,
                    show_rating: section.settings.show_rating,
                    lazy_load: lazy_load,
                    show_quick_add: section.settings.enable_quick_add,
                    section_id: section.id
                  %}
              
                </div>             
              </li> 
            {%- endfor -%}
          </ul>
          <div class="swiper-scrollbar"></div>
          {% if block.settings.Collection-url != blank  %}
            <a class="green-btn" href="{{ block.settings.Collection-url }}">View All</a>
          {% else %}
            <a class="green-btn" href="{{ block.settings.collection.url }}">View All</a>
          {% endif %}
        </div>

      {%- endfor -%}
    </div>
  </div>
</div>
<script>
  $(document).ready(function() {
    $('.collection_tabs .collection_tab_heading a').on('click', function(e) {
      var currentAttrValue = $(this).attr('href');

// Show/Hide collection_tabs
      $('.collection_tabs ' + currentAttrValue).fadeIn(400).siblings().hide();

// Change/remove current tab to active_collection
      $(this)
        .parent('li')
        .addClass('activeTab')
        .siblings()
        .removeClass('activeTab');
      e.preventDefault();
    });
  });
</script>
<script>
  $(document).ready(function() {
    var swiper = new Swiper(".collectionsProducts", {
      slidesPerView: 1,
      freeMode: false,
      rewind: false,
      spaceBetween: 20,
      scrollbar: {
        el: '.swiper-scrollbar',
        hide: true
      },
      breakpoints: {
        320: {
          rewind: false,
          slidesPerView: 1.3,
          spaceBetween: 10
        },
        640: {
          rewind: false,
          slidesPerView: 1.3,
          spaceBetween: 10
        },
        768: {
          rewind: false,
          slidesPerView: 2,
          spaceBetween: 20
        },
        1024: {
          rewind: false,
          slidesPerView: 4,
          spaceBetween: 60
        }
      }
    });

  });
</script>
<script>
    $(document).ready(function () {
       $('.product-variant-select').change(function () {
    const selectedOption = $(this).find(':selected');
    let regularPrice = selectedOption.data('regularprice'); // Use 'let' to reassign the value
    if (regularPrice.endsWith(".00")) {
        regularPrice = regularPrice.slice(0, -3); // Correct the slicing
    }
    const comparePrice = selectedOption.data('compareprice');
    $(this).parents('.swiper-slide').find('.price-item--regular').text( regularPrice); // Add ₹ symbol here
    $(this).parents('.swiper-slide').find('.price-item--sale').text(comparePrice || regularPrice); // Add ₹ symbol here
   // alert( regularPrice); // Add ₹ symbol here
});

    });
</script>
{% schema %}
  {
    "name": "Collection Tab",
    "settings": [
      {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "default": "background-1"
      }, {
        "type": "text",
        "id": "title",
        "label": "Heading"
      },
      {
        "type": "richtext",
        "id": "coll-desc",
        "label": "Description"
      },
      {
      "type": "checkbox",
      "id": "show_rating",
      "default": false,
      "label": "t:sections.featured-collection.settings.show_rating.label",
      "info": "t:sections.featured-collection.settings.show_rating.info"
    },
    {
      "type": "checkbox",
      "id": "enable_quick_add",
      "default": false,
      "label": "t:sections.featured-collection.settings.enable_quick_buy.label"
    }
    ],
    "blocks": [
      {
        "name": "Choose collection",
        "type": "Collection",
        "settings": [
          {
            "type": "text",
            "id": "tabLabel",
            "label": "Collection Tab Label"
          }, {
            "type": "collection",
            "id": "collection",
            "label": "Select Collection"
          }, {
            "type": "url",
            "id": "Collection-url",
            "label": "View all button Url"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Collection Tab"

      }
    ]
  }
{% endschema %}